<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4.1: http://docutils.sourceforge.net/" />
<title>olwidget</title>
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2005-12-18 01:56:14 +0100 (Sun, 18 Dec 2005) $
:Revision: $Revision: 4224 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

tt.docutils {
  background-color: #eeeeee }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="olwidget">
<h1 class="title">olwidget</h1>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#examples" id="id1" name="id1">Examples</a></li>
<li><a class="reference" href="#documentation" id="id2" name="id2">Documentation</a><ul>
<li><a class="reference" href="#olwidget-map-constructor" id="id3" name="id3">olwidget.Map constructor</a><ul>
<li><a class="reference" href="#options" id="id4" name="id4">options</a></li>
</ul>
</li>
<li><a class="reference" href="#utilities" id="id5" name="id5">Utilities</a></li>
</ul>
</li>
<li><a class="reference" href="#limitations" id="id6" name="id6">Limitations</a></li>
<li><a class="reference" href="#authors" id="id7" name="id7">Authors</a></li>
<li><a class="reference" href="#copying" id="id8" name="id8">Copying</a></li>
</ul>
</div>
<p><tt class="docutils literal"><span class="pre">olwidget</span></tt> is a simple javascript library to turn a textarea containing
(E)WKT geometry into an editable map, using openlayers.  The map writes EWKT
geometry to the textarea for later processing in forms.  This is useful for
anywhere you need a form to enter or edit precise geographic geometries for
storage in a GIS database such as <a class="reference" href="http://postgis.refractions.net/">PostGIS</a>.</p>
<p><tt class="docutils literal"><span class="pre">olwidget</span></tt> supports multiple geometry types, any number of maps per page,
multiple map providers, read-only maps, and much more (see <a class="reference" href="#options">options</a> below).  A
simple example:</p>
<pre class="literal-block">
&lt;html&gt;
    &lt;head&gt;
        &lt;script type='text/javascript' src='http://openlayers.org/api/2.7/OpenLayers.js'&gt;&lt;/script&gt;
        &lt;script type='text/javascript' src='http://openstreetmap.org/openlayers/OpenStreetMap.js'&gt;&lt;/script&gt;
        &lt;script type='text/javascript' src='js/olwidget.js'&gt;&lt;/script&gt;
        &lt;link rel='stylesheet' href='css/olwidget.css' /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;textarea id='my_point'&gt;SRID=900913;POINT(0 0)&lt;/textarea&gt;
        &lt;script type-'text/javascript'&gt;
            new olwidget.Map('my_point', {name: 'My Point'});
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>
<div class="section">
<h1><a class="toc-backref" href="#id1" id="examples" name="examples">Examples</a></h1>
<ul class="simple">
<li><a class="reference" href="examples/simple.html">Simple example</a></li>
<li><a class="reference" href="examples/collection.html">Collections</a> of multiple geometries.</li>
<li>Read only maps and <a class="reference" href="examples/read_only_and_multiple_maps.html">multiple maps per page</a></li>
<li>Custom <a class="reference" href="examples/custom_start_point_and_colors.html">starting locations and colors</a></li>
<li><a class="reference" href="examples/other_providers.html">Other map providers</a>, including Google,
Yahoo, Microsoft, OpenStreetMaps, and MetaCarta.</li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id2" id="documentation" name="documentation">Documentation</a></h1>
<p>To use, just create a new <tt class="docutils literal"><span class="pre">olwidget.Map</span></tt> object, with the DOM id of the
textarea you are replacing:</p>
<pre class="literal-block">
new olwidget.Map(&lt;textarea_id&gt;, [options]);
</pre>
<div class="section">
<h2><a class="toc-backref" href="#id3" id="olwidget-map-constructor" name="olwidget-map-constructor">olwidget.Map constructor</a></h2>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">textarea_id</span></tt>: the DOM id of the textarea to replace</li>
<li><tt class="docutils literal"><span class="pre">options</span></tt>: An object containing options for the resulting map.  All fields
are optional.</li>
</ul>
<div class="section">
<h3><a class="toc-backref" href="#id4" id="options" name="options">options</a></h3>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">name</span></tt> (string; defaults to the given <tt class="docutils literal"><span class="pre">textarea_id</span></tt>)</dt>
<dd>The name of the overlay layer for the map.</dd>
<dt><tt class="docutils literal"><span class="pre">geometry</span></tt> (<tt class="docutils literal"><span class="pre">'point'</span></tt>, <tt class="docutils literal"><span class="pre">'linestring'</span></tt>, or <tt class="docutils literal"><span class="pre">'polygon'</span></tt>; default <tt class="docutils literal"><span class="pre">'point'</span></tt>)</dt>
<dd>The geometry to use for this map.</dd>
<dt><tt class="docutils literal"><span class="pre">is_collection</span></tt> (boolean, default <tt class="docutils literal"><span class="pre">false</span></tt>)</dt>
<dd>If true, allows multiple points/lines/polygons.</dd>
<dt><tt class="docutils literal"><span class="pre">editable</span></tt> (boolean, default <tt class="docutils literal"><span class="pre">true</span></tt>)</dt>
<dd>If true, allows editing of geometries.</dd>
<dt><tt class="docutils literal"><span class="pre">hide_textarea</span></tt> (boolean; default <tt class="docutils literal"><span class="pre">true</span></tt>)</dt>
<dd>Hides the textarea if true.</dd>
<dt><tt class="docutils literal"><span class="pre">layers</span></tt> (Array; default <tt class="docutils literal"><span class="pre">['osm.mapnik']</span></tt>)</dt>
<dd><p class="first">A list of map base layers to include.  Choices include <tt class="docutils literal"><span class="pre">'osm.mapnik'</span></tt>,
<tt class="docutils literal"><span class="pre">'osm.osmarender'</span></tt>, <tt class="docutils literal"><span class="pre">'google.streets'</span></tt>, <tt class="docutils literal"><span class="pre">'google.physical'</span></tt>,
<tt class="docutils literal"><span class="pre">'google.satellite'</span></tt>, <tt class="docutils literal"><span class="pre">'google.hybrid'</span></tt>, <tt class="docutils literal"><span class="pre">'microsoft.ve'</span></tt>, and <tt class="docutils literal"><span class="pre">'yahoo'</span></tt></p>
<p class="last">You must include separately whatever javascript sources needed to use these
(e.g.  maps.google.com or openstreetmap.org apis).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">default_lat</span></tt> (float; default 0)</dt>
<dd>Latitude for the center point of the map.  Only used if there is no
geometry (e.g. the textarea is empty).</dd>
<dt><tt class="docutils literal"><span class="pre">default_lon</span></tt> (float: default 0)</dt>
<dd>Longitude for the center pointof the map.  Only used if there is no
geometry (e.g. the textarea is empty).</dd>
<dt><tt class="docutils literal"><span class="pre">default_zoom</span></tt> (int; default <tt class="docutils literal"><span class="pre">4</span></tt>) The zoom level to use on the map.  Only</dt>
<dd>used if there are no geometries (e.g. the textarea is empty).</dd>
<dt><tt class="docutils literal"><span class="pre">overlay_style</span></tt> (object)</dt>
<dd>A list of style definitions for the geometry overlays.  See
<a class="reference" href="http://docs.openlayers.org/library/feature_styling.html">OpenLayers styling</a>.</dd>
<dt><tt class="docutils literal"><span class="pre">map_class</span></tt> (string; default <tt class="docutils literal"><span class="pre">''</span></tt>)</dt>
<dd>A CSS class name to add to the div which is created to contain the map.</dd>
<dt><tt class="docutils literal"><span class="pre">map_style</span></tt> (object, default <tt class="docutils literal"><span class="pre">{width:</span> <span class="pre">'400px',</span> <span class="pre">height:</span> <span class="pre">'300px'}</span></tt>)</dt>
<dd>A set of CSS style definitions to apply to the div which is created to
contain the map.</dd>
<dt><tt class="docutils literal"><span class="pre">map_options</span></tt> (object)</dt>
<dd>Options to pass to the OpenLayers map constructor.  See
<a class="reference" href="http://dev.openlayers.org/docs/files/OpenLayers/Map-js.html#OpenLayers.Map.Constructor">OpenLayers.Map.Constructor</a>.</dd>
</dl>
</div>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id5" id="utilities" name="utilities">Utilities</a></h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">olwidget.transform_lon_lat(lon,</span> <span class="pre">lat)</span></tt>:</dt>
<dd>Method which takes two floats, longitude and latitude, and returns an
<tt class="docutils literal"><span class="pre">OpenLayers.LonLat</span></tt> instance using the map's projection.</dd>
</dl>
</div>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id6" id="limitations" name="limitations">Limitations</a></h1>
<p>Currently, <tt class="docutils literal"><span class="pre">olwidget</span></tt> only supports editing collections that contain a
single geometry type (either points, linestrings, or polygons), not
combinations of geometries.  It also does not support transformation of
incoming or outgoing (E)WKT to and from different projections (it requires SRID
900913).</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id7" id="authors" name="authors">Authors</a></h1>
<p>By Charlie DeTar &lt;<a class="reference" href="mailto:cfd&#64;media.mit.edu">cfd&#64;media.mit.edu</a>&gt;.  Based on Django OSMAdmin implementation
by Justin Bronn, Travis Pinney &amp; Dave Springmeyer.</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id8" id="copying" name="copying">Copying</a></h1>
<p>Copyright (c) Django Software Foundation and individual contributors</p>
<p>Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:</p>
<blockquote>
<ol class="arabic simple">
<li>Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.</li>
<li>Neither the name of Django nor the names of its contributors may be used
to endorse or promote products derived from this software without
specific prior written permission.</li>
</ol>
</blockquote>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
</div>
</div>
</body>
</html>
