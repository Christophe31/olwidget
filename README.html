<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>olwidget v0.2</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 5196 2007-06-03 20:25:28Z wiemann $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="olwidget-v0-2">
<h1 class="title">olwidget v0.2</h1>

<p>WARNING: the API has changed.  The older version can be accessed here:
<a class="reference external" href="http://github.com/yourcelf/olwidget/tree/v0.1">http://github.com/yourcelf/olwidget/tree/v0.1</a>.  Users upgrading olwidget should
take note of the <a class="reference external" href="doc/backwards_incompatible_changes.html">backwards incompatible changes</a>.</p>
<p><tt class="docutils literal"><span class="pre">olwidget</span></tt> is a javascript library and Django application for easily
incorporating editable and informational maps into web pages.  The javascript
library, <tt class="docutils literal"><span class="pre">olwidget.js</span></tt>, can be used standalone or in Django via the
<tt class="docutils literal"><span class="pre">olwidget</span></tt> Django app.</p>
<p>The doc directory contains <a class="reference external" href="doc/doc.html">documentation for olwidget.js</a>.</p>
<div class="section" id="django-documentation">
<h1>Django documentation</h1>
<p>To use the Django app requires a couple of steps:</p>
<ol class="arabic simple">
<li>Copy or link the <tt class="docutils literal"><span class="pre">olwidget</span></tt> directory in <tt class="docutils literal"><span class="pre">django_app</span></tt> into the search
path for your django project.</li>
<li>Copy or link the media (<tt class="docutils literal"><span class="pre">css</span></tt>, <tt class="docutils literal"><span class="pre">img</span></tt>, and <tt class="docutils literal"><span class="pre">js</span></tt>) into a directory
named <tt class="docutils literal"><span class="pre">olwidget</span></tt> under your project's <tt class="docutils literal"><span class="pre">MEDIA_URL</span></tt>.  If you wish to name
the directory something else, define <tt class="docutils literal"><span class="pre">OLWIDGET_MEDIA_URL</span></tt> with the URL
for the media files in your settings file.</li>
<li>Include <tt class="docutils literal"><span class="pre">'olwidget'</span></tt> in your project's settings <tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt> list.</li>
<li>(Optional) If you want to use Google or Yahoo map layers, you must include
<tt class="docutils literal"><span class="pre">GOOGLE_API_KEY</span></tt> or <tt class="docutils literal"><span class="pre">YAHOO_APP_ID</span></tt> in your settings file.  <tt class="docutils literal"><span class="pre">olwidget</span></tt>
uses OpenStreetMaps by default, which requires no key.</li>
</ol>
</div>
<div class="section" id="examples">
<h1>Examples</h1>
<div class="section" id="outside-of-admin">
<h2>Outside of admin</h2>
<p>A form definition that uses an editable map:</p>
<pre class="literal-block">
from django import forms
from olwidget.widgets import EditableMap

class MyForm(forms.Form):
    location = forms.CharField(widget=EditableMap())

# In a template:

&lt;head&gt; {{ form.media }} &lt;/head&gt;
&lt;body&gt;... {{ form }} ...&lt;/body&gt;
</pre>
<p>A simple read-only display map:</p>
<pre class="literal-block">
from olwidget.widgets import MapDisplay

map = MapDisplay(fields=[mymodel.start_point, mymodel.destination])

# In a template:

&lt;head&gt; {{ map.media }} &lt;/head&gt;
&lt;body&gt;... {{ map }} ...&lt;/body&gt;
</pre>
<p>A read-only map displaying informational popups over particular geometries:</p>
<pre class="literal-block">
from olwidget.widgets import InfoMap

map = InfoMap([
    [mymodel.point, &quot;&lt;p&gt;This is where I had my first kiss.&lt;/p&gt;&quot;],
    [othermodel.polygon, &quot;&lt;p&gt;This is my home town.&lt;/p&gt;&quot;],
    ...
])

# In a template:

&lt;head&gt; {{ map.media }} &lt;/head&gt;
&lt;body&gt;... {{ map }} ...&lt;/body&gt;
</pre>
</div>
<div class="section" id="inside-admin">
<h2>Inside Admin</h2>
<p><tt class="docutils literal"><span class="pre">olwidget</span></tt> has several advantages over the built-in geodjango admin map
implementation, including greater map customization, support for more geometry
types, and (new in v0.2) the option to include a map in admin changelist pages.</p>
<p>Example using <tt class="docutils literal"><span class="pre">olwidget</span></tt> in admin:</p>
<pre class="literal-block">
# admin.py

from django.contrib import admin
from olwidget.admin import GeoModelAdmin
from myapp import Restaurant, Owner

# Use the default map
admin.site.register(Restaurant, GeoModelAdmin)

# Customize the map
class MyGeoAdmin(GeoModelAdmin):
    map_options = {
        'layers': ['google.streets'],
        'defaultLat': 44,
        'defaultLon': -72,
    }

admin.site.register(Owner, MyGeoAdmin)
</pre>
<p>To show a clickable map on the admin changelist page, use the <tt class="docutils literal"><span class="pre">list_map</span></tt>
property to specify which fields to display:</p>
<pre class="literal-block">
# an example model:

class City(models.Model):
    location = models.PointField()

# admin.py

from django.contrib import admin
from olwidget.admin import GeoModelAdmin
from myapp import City

class CityGeoAdmin(GeoModelAdmin):
    list_map = ['location']

admin.site.register(City, CityGeoAdmin)
</pre>
<p>Options can be set for the changelist map using the <tt class="docutils literal"><span class="pre">list_map_options</span></tt>
property:</p>
<pre class="literal-block">
class CityGeoAdmin(GeoModelAdmin):
    list_map_options = {
        # group nearby points into clusters
        'cluster': True,
        'clusterDisplay': 'list',
    }
</pre>
</div>
</div>
<div class="section" id="options">
<h1>Options</h1>
<p>All of the <tt class="docutils literal"><span class="pre">olwidget</span></tt> map types can be passed a <tt class="docutils literal"><span class="pre">map_options</span></tt> dictionary
that controls the look and feel of the map.  These options are passed directly
to the <tt class="docutils literal"><span class="pre">olwidget.js</span></tt> map constructor.  An example:</p>
<pre class="literal-block">
from olwidget.widgets import MapDisplay

map = MapDisplay(map_options={
    'layers': ['osm.mapnik', 'google.hybrid', 'yahoo'],
    'defaultLat': 44,
    'defaultLon': -72,
})
</pre>
<p>For a complete list of options available to olwidget.js, see the <a class="reference external" href="doc/doc.html">olwidget.js
documentation</a>.</p>
</div>
<div class="section" id="authors">
<h1>Authors</h1>
<p>By Charlie DeTar &lt;<a class="reference external" href="mailto:cfd&#64;media.mit.edu">cfd&#64;media.mit.edu</a>&gt;.  Based on Django OSMAdmin implementation
by Justin Bronn, Travis Pinney &amp; Dave Springmeyer.</p>
</div>
<div class="section" id="copying">
<h1>Copying</h1>
<p>Note: This software is not a part of Django, but the author relinqueshes
copyright to the Django Software Foundation.</p>
<p>Copyright (c) Django Software Foundation and individual contributors</p>
<p>Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:</p>
<blockquote>
<ol class="arabic simple">
<li>Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.</li>
<li>Neither the name of Django nor the names of its contributors may be used
to endorse or promote products derived from this software without
specific prior written permission.</li>
</ol>
</blockquote>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
</div>
</div>
</body>
</html>
